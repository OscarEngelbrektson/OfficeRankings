<html>
    <head>
        <script>
            lambda_url = 'https://lne6kwcwxzlg5fskrfnkkt4lj40lssgc.lambda-url.eu-north-1.on.aws/ratings'
            let main = async () => {
                console.log('main')
                let response = await fetch(lambda_url, {cache: 'no-cache'})
                let df = await response.json()

                console.log(df)
                // document.write(JSON.stringify(df))

                let list = Object.keys(df.index).map(i => Object.fromEntries(Object.keys(df).map(k => [k, df[k][i]])))

                let table = document.querySelector('table')

                let tr = table.insertRow();
                Object.keys(list[0]).forEach(key => tr.insertCell().textContent = key)

                list.forEach(item => {
                    let tr = table.insertRow();
                    Object.values(item).forEach(value => tr.insertCell().textContent = value)
                })

            }

            addEventListener('DOMContentLoaded', main);
        </script>
        
    </head>
    <body>
        <table>
        </table>
    </body>
</html>